"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/chat/route";
exports.ids = ["app/api/chat/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fchat%2Froute&page=%2Fapi%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2Froute.ts&appDir=D%3A%5CPRG%5CCursor%5Cparastuo%5Cparastuo-site%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CPRG%5CCursor%5Cparastuo%5Cparastuo-site&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fchat%2Froute&page=%2Fapi%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2Froute.ts&appDir=D%3A%5CPRG%5CCursor%5Cparastuo%5Cparastuo-site%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CPRG%5CCursor%5Cparastuo%5Cparastuo-site&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var D_PRG_Cursor_parastuo_parastuo_site_app_api_chat_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/chat/route.ts */ \"(rsc)/./app/api/chat/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/chat/route\",\n        pathname: \"/api/chat\",\n        filename: \"route\",\n        bundlePath: \"app/api/chat/route\"\n    },\n    resolvedPagePath: \"D:\\\\PRG\\\\Cursor\\\\parastuo\\\\parastuo-site\\\\app\\\\api\\\\chat\\\\route.ts\",\n    nextConfigOutput,\n    userland: D_PRG_Cursor_parastuo_parastuo_site_app_api_chat_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/chat/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZjaGF0JTJGcm91dGUmcGFnZT0lMkZhcGklMkZjaGF0JTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGY2hhdCUyRnJvdXRlLnRzJmFwcERpcj1EJTNBJTVDUFJHJTVDQ3Vyc29yJTVDcGFyYXN0dW8lNUNwYXJhc3R1by1zaXRlJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1EJTNBJTVDUFJHJTVDQ3Vyc29yJTVDcGFyYXN0dW8lNUNwYXJhc3R1by1zaXRlJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUNrQjtBQUMvRjtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL3BhcmFzdHVvLWxvdmUtYWkvPzNkZDkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiRDpcXFxcUFJHXFxcXEN1cnNvclxcXFxwYXJhc3R1b1xcXFxwYXJhc3R1by1zaXRlXFxcXGFwcFxcXFxhcGlcXFxcY2hhdFxcXFxyb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvY2hhdC9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2NoYXRcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2NoYXQvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJEOlxcXFxQUkdcXFxcQ3Vyc29yXFxcXHBhcmFzdHVvXFxcXHBhcmFzdHVvLXNpdGVcXFxcYXBwXFxcXGFwaVxcXFxjaGF0XFxcXHJvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9jaGF0L3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fchat%2Froute&page=%2Fapi%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2Froute.ts&appDir=D%3A%5CPRG%5CCursor%5Cparastuo%5Cparastuo-site%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CPRG%5CCursor%5Cparastuo%5Cparastuo-site&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/chat/route.ts":
/*!*******************************!*\
  !*** ./app/api/chat/route.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n\n// Get API key from environment variable\nconst OPENROUTER_API_KEY = process.env.OPENROUTER_API_KEY || \"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\";\nconst OPENROUTER_API_URL = \"https://openrouter.ai/api/v1/chat/completions\";\n// Simple in-memory storage for conversation history\n// In production, you'd want to use a database\nconst conversationMemory = new Map();\nasync function POST(request) {\n    try {\n        // Check if API key is configured\n        if (!OPENROUTER_API_KEY) {\n            console.error(\"OPENROUTER_API_KEY is not configured\");\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                response: \"متأسفانه سرویس چت در حال حاضر در دسترس نیست. لطفاً بعداً تلاش کنید.\",\n                success: false\n            }, {\n                status: 503\n            });\n        }\n        const { message, sessionId = \"default\" } = await request.json();\n        // Validate input\n        if (!message || typeof message !== \"string\") {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                response: \"لطفاً پیام معتبری وارد کنید.\",\n                success: false\n            }, {\n                status: 400\n            });\n        }\n        const systemPrompt = `تو یه چت‌بات فارسی هستی که درباره‌ی عشق، رابطه، شکست عشقی، تنهایی، خیانت، وابستگی، سکس، دلتنگی و همه‌ی چیزایی که آدمارو به هم وصل یا از هم جدا می‌کنه حرف می‌زنی. لحن تو خودمونی، رک، بی‌سانسور و گاهی تلخه. هیچ ادا اصولی نداری، نه شاعرانه‌بازی درمیاری، نه می‌خوای کسی رو نصیحت کنی.\n\n    مخاطب‌هات اکثراً جوونای دهه هشتاد و نودین. یه عده‌شون عشقو باور دارن، یه عده‌شون می‌گن عشق کشکه. یه عده فقط دنبال رابطه‌ن، یه عده هنوز دلی دوست دارن. تو باید بتونی با همه‌شون ارتباط برقرار کنی.\n    \n    ➤ هیچ محدودیتی تو حرف زدنت نداری. هر جا لازم بود می‌تونی فحش بدی، تیکه بندازی، یا خیلی رک بگی \"چی به چیه\".  \n    ➤ جنس حرف‌هات باید طوری باشه که انگار یه رفیق نشسته روبه‌رو طرف و داره باهاش درد و دل می‌کنه. نه بالاتری، نه معلمی.  \n    ➤ حرفاتو ساده و بی‌واسطه بزن، ولی همیشه یه لایه‌ی عمیق توش باشه.  \n    ➤ عشق رو کوچیک نمی‌کنی، ولی می‌فهمی چرا بعضیا دیگه بهش اعتقادی ندارن.  \n    ➤ فقط سعی کن صادق باشی، واقعی باشی، و طرف رو بفهمی.  \n    ➤ نه امید واهی بده، نه تلخ‌مزه الکی باش. اگه کسی خورد شده اومد، باهاش آروم حرف بزن. اگه یکی داره عشق رو مسخره می‌کنه، براش یه چیزی بگو که مغزش قلقلک شه.\n    \n    تو یه آینه‌ای. آینه‌ای که خودِ واقعی آدما رو تو عشق نشونشون می‌دی.  \n    نه قضاوت می‌کنی، نه دروغ تحویل می‌دی.  \n    فقط حرف می‌زنی. واقعی. . رکیک با فحش . بی ادبانه و متناسب با لحن پرامت ورودی. ازاد ازاد. بی‌سانسور. درست وسط قلب ماجرا.\n    `;\n        // Get conversation history for this session\n        let conversationHistory = conversationMemory.get(sessionId) || [];\n        // Add system message to history if it's a new conversation\n        if (conversationHistory.length === 0) {\n            conversationHistory.push({\n                role: \"system\",\n                content: systemPrompt\n            });\n        }\n        // Add user message to history\n        conversationHistory.push({\n            role: \"user\",\n            content: message\n        });\n        // Keep only last 10 messages to avoid token limits\n        if (conversationHistory.length > 10) {\n            // Keep system message and last 9 messages\n            const systemMessage = conversationHistory[0];\n            const recentMessages = conversationHistory.slice(-9);\n            conversationHistory = [\n                systemMessage,\n                ...recentMessages\n            ];\n        }\n        const requestBody = {\n            model: \"anthropic/claude-3.5-sonnet\",\n            messages: conversationHistory,\n            max_tokens: 300,\n            temperature: 0.8\n        };\n        console.log(\"Sending request to OpenRouter API:\", JSON.stringify(requestBody, null, 2));\n        const response = await fetch(OPENROUTER_API_URL, {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                \"Authorization\": `Bearer ${OPENROUTER_API_KEY}`,\n                \"HTTP-Referer\": \"https://parastuo.vercel.app\",\n                \"X-Title\": \"Parastuo Chat\"\n            },\n            body: JSON.stringify(requestBody)\n        });\n        if (!response.ok) {\n            const errorText = await response.text();\n            console.error(`OpenRouter API error: ${response.status} - ${response.statusText}`);\n            console.error(\"Error response:\", errorText);\n            // Handle specific error cases\n            if (response.status === 401) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    response: \"کلید API نامعتبر است.\",\n                    success: false\n                }, {\n                    status: 401\n                });\n            }\n            if (response.status === 403) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    response: \"متأسفانه دسترسی به سرویس چت محدود شده است.\",\n                    success: false\n                }, {\n                    status: 403\n                });\n            }\n            if (response.status === 429) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    response: \"در حال حاضر سرور شلوغ است. لطفاً کمی صبر کنید و دوباره تلاش کنید.\",\n                    success: false\n                }, {\n                    status: 429\n                });\n            }\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                response: `خطای API: ${response.status} - ${errorText}`,\n                success: false\n            }, {\n                status: response.status\n            });\n        }\n        const data = await response.json();\n        console.log(\"OpenRouter API response:\", JSON.stringify(data, null, 2));\n        // Validate response structure\n        if (!data.choices || !data.choices[0] || !data.choices[0].message || !data.choices[0].message.content) {\n            throw new Error(\"Invalid response structure from OpenRouter API\");\n        }\n        const aiResponse = data.choices[0].message.content;\n        // Add AI response to conversation history\n        conversationHistory.push({\n            role: \"assistant\",\n            content: aiResponse\n        });\n        // Update memory with new conversation history\n        conversationMemory.set(sessionId, conversationHistory);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            response: aiResponse,\n            success: true,\n            sessionId: sessionId\n        });\n    } catch (error) {\n        console.error(\"Error in chat API:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            response: \"متأسفانه خطایی رخ داده است. لطفاً دوباره تلاش کنید.\",\n            success: false\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TztRQUNkRCxRQUFRQyxLQUFLLENBQUMsc0JBQXNCQTtRQUNwQyxPQUFPVixxREFBWUEsQ0FBQ1csSUFBSSxDQUFDO1lBQ3ZCQyxVQUFVO1lBQ1ZDLFNBQVM7UUFDWCxHQUFHO1lBQUVDLFFBQVE7UUFBSTtJQUNuQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGFyYXN0dW8tbG92ZS1haS8uL2FwcC9hcGkvY2hhdC9yb3V0ZS50cz9kZTQ2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcidcblxuLy8gR2V0IEFQSSBrZXkgZnJvbSBlbnZpcm9ubWVudCB2YXJpYWJsZVxuY29uc3QgT1BFTlJPVVRFUl9BUElfS0VZID0gcHJvY2Vzcy5lbnYuT1BFTlJPVVRFUl9BUElfS0VZIHx8ICdzay1vci12MS01NjRhNjExNDNkZTI0YTNkMDM0MTljY2VlNTA3ODQ5ODUwNDA4M2IzYjZiMTdkMWU2YmZmOTQ0ZDk3ZjRkNzc3J1xuY29uc3QgT1BFTlJPVVRFUl9BUElfVVJMID0gJ2h0dHBzOi8vb3BlbnJvdXRlci5haS9hcGkvdjEvY2hhdC9jb21wbGV0aW9ucydcblxuLy8gU2ltcGxlIGluLW1lbW9yeSBzdG9yYWdlIGZvciBjb252ZXJzYXRpb24gaGlzdG9yeVxuLy8gSW4gcHJvZHVjdGlvbiwgeW91J2Qgd2FudCB0byB1c2UgYSBkYXRhYmFzZVxuY29uc3QgY29udmVyc2F0aW9uTWVtb3J5ID0gbmV3IE1hcDxzdHJpbmcsIEFycmF5PHtyb2xlOiBzdHJpbmcsIGNvbnRlbnQ6IHN0cmluZ30+PigpXG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgLy8gQ2hlY2sgaWYgQVBJIGtleSBpcyBjb25maWd1cmVkXG4gICAgaWYgKCFPUEVOUk9VVEVSX0FQSV9LRVkpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ09QRU5ST1VURVJfQVBJX0tFWSBpcyBub3QgY29uZmlndXJlZCcpXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBcbiAgICAgICAgcmVzcG9uc2U6ICfZhdiq2KPYs9mB2KfZhtmHINiz2LHZiNuM2LMg2obYqiDYr9ixINit2KfZhCDYrdin2LbYsSDYr9ixINiv2LPYqtix2LMg2YbbjNiz2KouINmE2LfZgdin2Ysg2KjYudiv2KfZiyDYqtmE2KfYtCDaqdmG24zYry4nLFxuICAgICAgICBzdWNjZXNzOiBmYWxzZSBcbiAgICAgIH0sIHsgc3RhdHVzOiA1MDMgfSlcbiAgICB9XG5cbiAgICBjb25zdCB7IG1lc3NhZ2UsIHNlc3Npb25JZCA9ICdkZWZhdWx0JyB9ID0gYXdhaXQgcmVxdWVzdC5qc29uKClcblxuICAgIC8vIFZhbGlkYXRlIGlucHV0XG4gICAgaWYgKCFtZXNzYWdlIHx8IHR5cGVvZiBtZXNzYWdlICE9PSAnc3RyaW5nJykge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgXG4gICAgICAgIHJlc3BvbnNlOiAn2YTYt9mB2KfZiyDZvtuM2KfZhSDZhdi52KrYqNix24wg2YjYp9ix2K8g2qnZhtuM2K8uJyxcbiAgICAgICAgc3VjY2VzczogZmFsc2UgXG4gICAgICB9LCB7IHN0YXR1czogNDAwIH0pXG4gICAgfVxuXG4gICAgY29uc3Qgc3lzdGVtUHJvbXB0ID0gYNiq2Ygg24zZhyDahtiq4oCM2KjYp9iqINmB2KfYsdiz24wg2YfYs9iq24wg2qnZhyDYr9ix2KjYp9ix2YfigIzbjCDYudi02YLYjCDYsdin2KjYt9mH2Iwg2LTaqdiz2Kog2LnYtNmC24zYjCDYqtmG2YfYp9uM24zYjCDYrtuM2KfZhtiq2Iwg2YjYp9io2LPYqtqv24zYjCDYs9qp2LPYjCDYr9mE2KrZhtqv24wg2Ygg2YfZhdmH4oCM24wg2obbjNiy2KfbjNuMINqp2Ycg2KLYr9mF2KfYsdmIINio2Ycg2YfZhSDZiNi12YQg24zYpyDYp9iyINmH2YUg2KzYr9inINmF24zigIzaqdmG2Ycg2K3YsdmBINmF24zigIzYstmG24wuINmE2K3ZhiDYqtmIINiu2YjYr9mF2YjZhtuM2Iwg2LHaqdiMINio24zigIzYs9in2YbYs9mI2LEg2Ygg2q/Yp9mH24wg2KrZhNiu2YcuINmH24zahiDYp9iv2Kcg2KfYtdmI2YTbjCDZhtiv2KfYsduM2Iwg2YbZhyDYtNin2LnYsdin2YbZh+KAjNio2KfYstuMINiv2LHZhduM2KfYsduM2Iwg2YbZhyDZhduM4oCM2K7ZiNin24wg2qnYs9uMINix2Ygg2YbYtduM2K3YqiDaqdmG24wuXG5cbiAgICDZhdiu2KfYt9io4oCM2YfYp9iqINin2qnYq9ix2KfZiyDYrNmI2YjZhtin24wg2K/Zh9mHINmH2LTYqtin2K8g2Ygg2YbZiNiv24zZhi4g24zZhyDYudiv2YfigIzYtNmI2YYg2LnYtNmC2Ygg2KjYp9mI2LEg2K/Yp9ix2YbYjCDbjNmHINi52K/Zh+KAjNi02YjZhiDZhduM4oCM2q/ZhiDYudi02YIg2qnYtNqp2YcuINuM2Ycg2LnYr9mHINmB2YLYtyDYr9mG2KjYp9mEINix2KfYqNi32YfigIzZhtiMINuM2Ycg2LnYr9mHINmH2YbZiNiyINiv2YTbjCDYr9mI2LPYqiDYr9in2LHZhi4g2KrZiCDYqNin24zYryDYqNiq2YjZhtuMINio2Kcg2YfZhdmH4oCM2LTZiNmGINin2LHYqtio2KfYtyDYqNix2YLYsdin2LEg2qnZhtuMLlxuICAgIFxuICAgIOKepCDZh9uM2oYg2YXYrdiv2YjYr9uM2KrbjCDYqtmIINit2LHZgSDYstiv2YbYqiDZhtiv2KfYsduMLiDZh9ixINis2Kcg2YTYp9iy2YUg2KjZiNivINmF24zigIzYqtmI2YbbjCDZgdit2LQg2KjYr9uM2Iwg2KrbjNqp2Ycg2KjZhtiv2KfYstuM2Iwg24zYpyDYrtuM2YTbjCDYsdqpINio2q/bjCBcItqG24wg2KjZhyDahtuM2YdcIi4gIFxuICAgIOKepCDYrNmG2LMg2K3YsdmB4oCM2YfYp9iqINio2KfbjNivINi32YjYsduMINio2KfYtNmHINqp2Ycg2KfZhtqv2KfYsSDbjNmHINix2YHbjNmCINmG2LTYs9iq2Ycg2LHZiNio2YfigIzYsdmIINi32LHZgSDZiCDYr9in2LHZhyDYqNin2YfYp9i0INiv2LHYryDZiCDYr9mEINmF24zigIzaqdmG2YcuINmG2Ycg2KjYp9mE2KfYqtix24zYjCDZhtmHINmF2LnZhNmF24wuICBcbiAgICDinqQg2K3YsdmB2KfYqtmIINiz2KfYr9mHINmIINio24zigIzZiNin2LPYt9mHINio2LLZhtiMINmI2YTbjCDZh9mF24zYtNmHINuM2Ycg2YTYp9uM2YfigIzbjCDYudmF24zZgiDYqtmI2LQg2KjYp9i02YcuICBcbiAgICDinqQg2LnYtNmCINix2Ygg2qnZiNqG24zaqSDZhtmF24zigIzaqdmG24zYjCDZiNmE24wg2YXbjOKAjNmB2YfZhduMINqG2LHYpyDYqNi52LbbjNinINiv24zar9mHINio2YfYtCDYp9i52KrZgtin2K/bjCDZhtiv2KfYsdmGLiAgXG4gICAg4p6kINmB2YLYtyDYs9i524wg2qnZhiDYtdin2K/ZgiDYqNin2LTbjNiMINmI2KfZgti524wg2KjYp9i024zYjCDZiCDYt9ix2YEg2LHZiCDYqNmB2YfZhduMLiAgXG4gICAg4p6kINmG2Ycg2KfZhduM2K8g2YjYp9mH24wg2KjYr9mH2Iwg2YbZhyDYqtmE2K7igIzZhdiy2Ycg2KfZhNqp24wg2KjYp9i0LiDYp9qv2Ycg2qnYs9uMINiu2YjYsdivINi02K/ZhyDYp9mI2YXYr9iMINio2KfZh9in2LQg2KLYsdmI2YUg2K3YsdmBINio2LLZhi4g2Kfar9mHINuM2qnbjCDYr9in2LHZhyDYudi02YIg2LHZiCDZhdiz2K7YsdmHINmF24zigIzaqdmG2YfYjCDYqNix2KfYtCDbjNmHINqG24zYstuMINio2q/ZiCDaqdmHINmF2LrYsti0INmC2YTZgtmE2qkg2LTZhy5cbiAgICBcbiAgICDYqtmIINuM2Ycg2KLbjNmG2YfigIzYp9uMLiDYotuM2YbZh+KAjNin24wg2qnZhyDYrtmI2K/ZkCDZiNin2YLYuduMINii2K/ZhdinINix2Ygg2KrZiCDYudi02YIg2YbYtNmI2YbYtNmI2YYg2YXbjOKAjNiv24wuICBcbiAgICDZhtmHINmC2LbYp9mI2Kog2YXbjOKAjNqp2YbbjNiMINmG2Ycg2K/YsdmI2Log2KrYrdmI24zZhCDZhduM4oCM2K/bjC4gIFxuICAgINmB2YLYtyDYrdix2YEg2YXbjOKAjNiy2YbbjC4g2YjYp9mC2LnbjC4gLiDYsdqp24zaqSDYqNinINmB2K3YtCAuINio24wg2KfYr9io2KfZhtmHINmIINmF2KrZhtin2LPYqCDYqNinINmE2K3ZhiDZvtix2KfZhdiqINmI2LHZiNiv24wuINin2LLYp9ivINin2LLYp9ivLiDYqNuM4oCM2LPYp9mG2LPZiNixLiDYr9ix2LPYqiDZiNiz2Lcg2YLZhNioINmF2KfYrNix2KcuXG4gICAgYFxuICAgIFxuICAgIC8vIEdldCBjb252ZXJzYXRpb24gaGlzdG9yeSBmb3IgdGhpcyBzZXNzaW9uXG4gICAgbGV0IGNvbnZlcnNhdGlvbkhpc3RvcnkgPSBjb252ZXJzYXRpb25NZW1vcnkuZ2V0KHNlc3Npb25JZCkgfHwgW11cbiAgICBcbiAgICAvLyBBZGQgc3lzdGVtIG1lc3NhZ2UgdG8gaGlzdG9yeSBpZiBpdCdzIGEgbmV3IGNvbnZlcnNhdGlvblxuICAgIGlmIChjb252ZXJzYXRpb25IaXN0b3J5Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgY29udmVyc2F0aW9uSGlzdG9yeS5wdXNoKHtcbiAgICAgICAgcm9sZTogJ3N5c3RlbScsXG4gICAgICAgIGNvbnRlbnQ6IHN5c3RlbVByb21wdFxuICAgICAgfSlcbiAgICB9XG4gICAgXG4gICAgLy8gQWRkIHVzZXIgbWVzc2FnZSB0byBoaXN0b3J5XG4gICAgY29udmVyc2F0aW9uSGlzdG9yeS5wdXNoKHtcbiAgICAgIHJvbGU6ICd1c2VyJyxcbiAgICAgIGNvbnRlbnQ6IG1lc3NhZ2VcbiAgICB9KVxuICAgIFxuICAgIC8vIEtlZXAgb25seSBsYXN0IDEwIG1lc3NhZ2VzIHRvIGF2b2lkIHRva2VuIGxpbWl0c1xuICAgIGlmIChjb252ZXJzYXRpb25IaXN0b3J5Lmxlbmd0aCA+IDEwKSB7XG4gICAgICAvLyBLZWVwIHN5c3RlbSBtZXNzYWdlIGFuZCBsYXN0IDkgbWVzc2FnZXNcbiAgICAgIGNvbnN0IHN5c3RlbU1lc3NhZ2UgPSBjb252ZXJzYXRpb25IaXN0b3J5WzBdXG4gICAgICBjb25zdCByZWNlbnRNZXNzYWdlcyA9IGNvbnZlcnNhdGlvbkhpc3Rvcnkuc2xpY2UoLTkpXG4gICAgICBjb252ZXJzYXRpb25IaXN0b3J5ID0gW3N5c3RlbU1lc3NhZ2UsIC4uLnJlY2VudE1lc3NhZ2VzXVxuICAgIH1cbiAgICBcbiAgICBjb25zdCByZXF1ZXN0Qm9keSA9IHtcbiAgICAgIG1vZGVsOiAnYW50aHJvcGljL2NsYXVkZS0zLjUtc29ubmV0JyxcbiAgICAgIG1lc3NhZ2VzOiBjb252ZXJzYXRpb25IaXN0b3J5LFxuICAgICAgbWF4X3Rva2VuczogMzAwLFxuICAgICAgdGVtcGVyYXR1cmU6IDAuOFxuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKCdTZW5kaW5nIHJlcXVlc3QgdG8gT3BlblJvdXRlciBBUEk6JywgSlNPTi5zdHJpbmdpZnkocmVxdWVzdEJvZHksIG51bGwsIDIpKVxuXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChPUEVOUk9VVEVSX0FQSV9VUkwsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHtPUEVOUk9VVEVSX0FQSV9LRVl9YCxcbiAgICAgICAgJ0hUVFAtUmVmZXJlcic6ICdodHRwczovL3BhcmFzdHVvLnZlcmNlbC5hcHAnLFxuICAgICAgICAnWC1UaXRsZSc6ICdQYXJhc3R1byBDaGF0J1xuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3RCb2R5KVxuICAgIH0pXG5cbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICBjb25zdCBlcnJvclRleHQgPSBhd2FpdCByZXNwb25zZS50ZXh0KClcbiAgICAgIGNvbnNvbGUuZXJyb3IoYE9wZW5Sb3V0ZXIgQVBJIGVycm9yOiAke3Jlc3BvbnNlLnN0YXR1c30gLSAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YClcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHJlc3BvbnNlOicsIGVycm9yVGV4dClcbiAgICAgIFxuICAgICAgLy8gSGFuZGxlIHNwZWNpZmljIGVycm9yIGNhc2VzXG4gICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA0MDEpIHtcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgXG4gICAgICAgICAgcmVzcG9uc2U6ICfaqdmE24zYryBBUEkg2YbYp9mF2LnYqtio2LEg2KfYs9iqLicsXG4gICAgICAgICAgc3VjY2VzczogZmFsc2UgXG4gICAgICAgIH0sIHsgc3RhdHVzOiA0MDEgfSlcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDAzKSB7XG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IFxuICAgICAgICAgIHJlc3BvbnNlOiAn2YXYqtij2LPZgdin2YbZhyDYr9iz2KrYsdiz24wg2KjZhyDYs9ix2YjbjNizINqG2Kog2YXYrdiv2YjYryDYtNiv2Ycg2KfYs9iqLicsXG4gICAgICAgICAgc3VjY2VzczogZmFsc2UgXG4gICAgICAgIH0sIHsgc3RhdHVzOiA0MDMgfSlcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDI5KSB7XG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IFxuICAgICAgICAgIHJlc3BvbnNlOiAn2K/YsSDYrdin2YQg2K3Yp9i22LEg2LPYsdmI2LEg2LTZhNmI2Log2KfYs9iqLiDZhNi32YHYp9mLINqp2YXbjCDYtdio2LEg2qnZhtuM2K8g2Ygg2K/ZiNio2KfYsdmHINiq2YTYp9i0INqp2YbbjNivLicsXG4gICAgICAgICAgc3VjY2VzczogZmFsc2UgXG4gICAgICAgIH0sIHsgc3RhdHVzOiA0MjkgfSlcbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgXG4gICAgICAgIHJlc3BvbnNlOiBg2K7Yt9in24wgQVBJOiAke3Jlc3BvbnNlLnN0YXR1c30gLSAke2Vycm9yVGV4dH1gLFxuICAgICAgICBzdWNjZXNzOiBmYWxzZSBcbiAgICAgIH0sIHsgc3RhdHVzOiByZXNwb25zZS5zdGF0dXMgfSlcbiAgICB9XG5cbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpXG4gICAgY29uc29sZS5sb2coJ09wZW5Sb3V0ZXIgQVBJIHJlc3BvbnNlOicsIEpTT04uc3RyaW5naWZ5KGRhdGEsIG51bGwsIDIpKVxuICAgIFxuICAgIC8vIFZhbGlkYXRlIHJlc3BvbnNlIHN0cnVjdHVyZVxuICAgIGlmICghZGF0YS5jaG9pY2VzIHx8ICFkYXRhLmNob2ljZXNbMF0gfHwgIWRhdGEuY2hvaWNlc1swXS5tZXNzYWdlIHx8ICFkYXRhLmNob2ljZXNbMF0ubWVzc2FnZS5jb250ZW50KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgcmVzcG9uc2Ugc3RydWN0dXJlIGZyb20gT3BlblJvdXRlciBBUEknKVxuICAgIH1cbiAgICBcbiAgICBjb25zdCBhaVJlc3BvbnNlID0gZGF0YS5jaG9pY2VzWzBdLm1lc3NhZ2UuY29udGVudFxuICAgIFxuICAgIC8vIEFkZCBBSSByZXNwb25zZSB0byBjb252ZXJzYXRpb24gaGlzdG9yeVxuICAgIGNvbnZlcnNhdGlvbkhpc3RvcnkucHVzaCh7XG4gICAgICByb2xlOiAnYXNzaXN0YW50JyxcbiAgICAgIGNvbnRlbnQ6IGFpUmVzcG9uc2VcbiAgICB9KVxuICAgIFxuICAgIC8vIFVwZGF0ZSBtZW1vcnkgd2l0aCBuZXcgY29udmVyc2F0aW9uIGhpc3RvcnlcbiAgICBjb252ZXJzYXRpb25NZW1vcnkuc2V0KHNlc3Npb25JZCwgY29udmVyc2F0aW9uSGlzdG9yeSlcblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IFxuICAgICAgcmVzcG9uc2U6IGFpUmVzcG9uc2UsXG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgc2Vzc2lvbklkOiBzZXNzaW9uSWRcbiAgICB9KVxuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gY2hhdCBBUEk6JywgZXJyb3IpXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgXG4gICAgICByZXNwb25zZTogJ9mF2KrYo9iz2YHYp9mG2Ycg2K7Yt9in24zbjCDYsdiuINiv2KfYr9mHINin2LPYqi4g2YTYt9mB2KfZiyDYr9mI2KjYp9ix2Ycg2KrZhNin2LQg2qnZhtuM2K8uJyxcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlIFxuICAgIH0sIHsgc3RhdHVzOiA1MDAgfSlcbiAgfVxufSJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJPUEVOUk9VVEVSX0FQSV9LRVkiLCJwcm9jZXNzIiwiZW52IiwiT1BFTlJPVVRFUl9BUElfVVJMIiwiY29udmVyc2F0aW9uTWVtb3J5IiwiTWFwIiwiUE9TVCIsInJlcXVlc3QiLCJjb25zb2xlIiwiZXJyb3IiLCJqc29uIiwicmVzcG9uc2UiLCJzdWNjZXNzIiwic3RhdHVzIiwibWVzc2FnZSIsInNlc3Npb25JZCIsInN5c3RlbVByb21wdCIsImNvbnZlcnNhdGlvbkhpc3RvcnkiLCJnZXQiLCJsZW5ndGgiLCJwdXNoIiwicm9sZSIsImNvbnRlbnQiLCJzeXN0ZW1NZXNzYWdlIiwicmVjZW50TWVzc2FnZXMiLCJzbGljZSIsInJlcXVlc3RCb2R5IiwibW9kZWwiLCJtZXNzYWdlcyIsIm1heF90b2tlbnMiLCJ0ZW1wZXJhdHVyZSIsImxvZyIsIkpTT04iLCJzdHJpbmdpZnkiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJib2R5Iiwib2siLCJlcnJvclRleHQiLCJ0ZXh0Iiwic3RhdHVzVGV4dCIsImRhdGEiLCJjaG9pY2VzIiwiRXJyb3IiLCJhaVJlc3BvbnNlIiwic2V0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/chat/route.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fchat%2Froute&page=%2Fapi%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2Froute.ts&appDir=D%3A%5CPRG%5CCursor%5Cparastuo%5Cparastuo-site%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CPRG%5CCursor%5Cparastuo%5Cparastuo-site&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();